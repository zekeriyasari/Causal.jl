<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Constuction and Simulation of Networks · Jusdl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="Jusdl logo"/></a><div class="docs-package-name"><span class="docs-autofit">Jusdl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Modeling and Simulation in Jusdl</span><ul><li><a class="tocitem" href="../../modeling_and_simulation/modeling/">Modelling</a></li><li><a class="tocitem" href="../../modeling_and_simulation/simulation/">Simulation</a></li></ul></li><li><span class="tocitem">Manual</span><ul><li><input class="collapse-toggle" id="menuitem-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-1"><span class="docs-label">Utilities</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/utilities/callback/">Callback</a></li><li><a class="tocitem" href="../../manual/utilities/buffers/">Buffer</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Connections</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/connections/link/">Links</a></li><li><a class="tocitem" href="../../manual/connections/bus/">Busses</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3"><span class="docs-label">Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-3-1" type="checkbox"/><label class="tocitem" for="menuitem-3-3-1"><span class="docs-label">ComponentsBase</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/components/componentsbase/evolution/">Evolution of Components</a></li><li><a class="tocitem" href="../../manual/components/componentsbase/generic_fields/">Generic Fields of Components</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-3-2"><span class="docs-label">Sources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/components/sources/clock/">Clock</a></li><li><a class="tocitem" href="../../manual/components/sources/generators/">Generators</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-3" type="checkbox"/><label class="tocitem" for="menuitem-3-3-3"><span class="docs-label">Sinks</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/components/sinks/sinks/">Sinks</a></li><li><a class="tocitem" href="../../manual/components/sinks/writer/">Writer</a></li><li><a class="tocitem" href="../../manual/components/sinks/printer/">Printer</a></li><li><a class="tocitem" href="../../manual/components/sinks/scope/">Scope</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-3-4"><span class="docs-label">Systems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><input class="collapse-toggle" id="menuitem-3-3-4-1" type="checkbox"/><label class="tocitem" for="menuitem-3-3-4-1"><span class="docs-label">StaticSystems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/components/systems/staticsystems/staticsystems/">StaticSystems</a></li><li><a class="tocitem" href="../../manual/components/systems/staticsystems/subsystem/">Subsystem</a></li><li><a class="tocitem" href="../../manual/components/systems/staticsystems/network/">Network</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-3-4-2" type="checkbox"/><label class="tocitem" for="menuitem-3-3-4-2"><span class="docs-label">DynamicSystems</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/discretesystem/">DiscreteSystem</a></li><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/odesystem/">ODESystem</a></li><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/daesystem/">DAESystem</a></li><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/rodesystem/">RODESystem</a></li><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/sdesystem/">SDESystem</a></li><li><a class="tocitem" href="../../manual/components/systems/dynamicsystems/ddesystem/">DDESystem</a></li></ul></li></ul></li></ul></li><li><a class="tocitem" href="../../manual/plugins/plugins/">Plugins</a></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Models</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../manual/models/taskmanager/">Task Manager</a></li><li><a class="tocitem" href="../../manual/models/simulation/">Simulation</a></li><li><a class="tocitem" href="../../manual/models/model/">Model</a></li></ul></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../simple_model/">Simple Model Simulation</a></li><li><a class="tocitem" href="../breaking_algebraic_loops/">Breaking Algebraic Loops</a></li><li><a class="tocitem" href="../construction_and_simulation_of_subsystems/">Constuction and Simulation of Subsystems</a></li><li class="is-active"><a class="tocitem" href>Constuction and Simulation of Networks</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Constuction and Simulation of Networks</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Constuction and Simulation of Networks</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/zekeriyasari/Jusdl.jl/blob/master/docs/src/tutorials/construction_and_simulation_of_networks.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Construction-and-Simulation-of-Networks-1"><a class="docs-heading-anchor" href="#Construction-and-Simulation-of-Networks-1">Construction and Simulation of Networks</a><a class="docs-heading-anchor-permalink" href="#Construction-and-Simulation-of-Networks-1" title="Permalink"></a></h1><p>In this tutorial, we will simulate a network. A network is actually a subsystem. That is, a network consists of components that are connected to each other. See <a href="../../manual/components/systems/staticsystems/network/#Network-1">Network</a> and <a href="../../manual/components/systems/staticsystems/subsystem/#Subsystem-1">Subsystem</a> for more information networks and subsystem.</p><h3 id="Construction-of-Networks-1"><a class="docs-heading-anchor" href="#Construction-of-Networks-1">Construction of Networks</a><a class="docs-heading-anchor-permalink" href="#Construction-of-Networks-1" title="Permalink"></a></h3><p>In this example, we will simulate a small network consisting of rwo dynamical systems. The network in this example consists of identical dynamical systems whose dynamics is given by</p><div>\[    \dot{x}_i = f(x_i) + \sum\limits_{j = 1}^{N} \epsilon_{ij} P x_j, \quad i = 1, \ldots, N\]</div><p>where <span>$N$</span> is the number of node,  <span>$f$</span> is the vector function corresponding to the individual node dynamics, <span>$\epsilon_{ij}$</span> is the coupling strength between the nodes <span>$i$</span> and <span>$j$</span>. The diagonal matrix <span>$P$</span> determines the way the nodes are connected to each other. In this simulation, we construct a network consisting of two nodes with Lorenz dynamics. The matrix <span>$E = [\epsilon_{ij}]$</span> determines the coupling strength and topology of the network: <span>$\epsilon_{ij} = 0$</span> if there is no connection between nodes <span>$i$</span> and <span>$j$</span>, otherwise <span>$\epsilon_{ij} = 0$</span>.</p><pre><code class="language-julia">using Jusdl  # hide
numnodes = 2
nodes = [LorenzSystem(Bus(3), Bus(3)) for i = 1 : numnodes]
conmat = [-1 1; 1 -1] * 10
cplmat = [1 0 0; 0 0 0; 0 0 0]
net = Network(nodes, conmat, cplmat, inputnodeidx=[], outputnodeidx=1:numnodes)</code></pre><pre><code class="language-none">Network{Nothing,Bus{Link{Float64}},Link{Float64},Link{Bool},Array{AbstractSystem,1},Array{Int64,2},Array{Int64,2}}(nothing, Bus(nlinks:6, eltype:Link{Float64}, isreadable:false, iswritable:false), Link(state:open, eltype:Float64, hasmaster:false, numslaves:0, isreadable:false, iswritable:false), Link(state:open, eltype:Bool, hasmaster:false, numslaves:0, isreadable:false, iswritable:false), Callback[], UUID(&quot;5b4ac5dd-9ba0-49e8-8166-876ecb9e832c&quot;), AbstractSystem[LorenzSystem(sigma:10.0, beta:2.6666666666666665, rho:28.0, gamma:1.0, state:[0.07447929810661713, 0.3171065951989447, 0.4981002551774796], t:0.0, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), LorenzSystem(sigma:10.0, beta:2.6666666666666665, rho:28.0, gamma:1.0, state:[0.7479647558329519, 0.4307042696943002, 0.4033980734200635], t:0.0, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), Coupler(conmat:[-10 10; 10 -10], cplmat:[1 0 0; 0 0 0; 0 0 0]), Memory(ndelay:3, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), Memory(ndelay:3, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false))], [-10 10; 10 -10], [1 0 0; 0 0 0; 0 0 0], UnitRange{Int64}[1:2])</code></pre><p>Note that the states of all the nodes are taken as output nodes. To save the output values of the nodes, we construct a writer. </p><pre><code class="language-julia">writer = Writer(Bus(length(net.output)))</code></pre><pre><code class="language-none">Writer(path:/tmp/3033372c-5628-40f3-9abc-171a48927691.jld2, nin:6)</code></pre><p>We connect the network to the writer and construct the model </p><pre><code class="language-julia">connect(net.output, writer.input)
model = Model(net, writer)</code></pre><pre><code class="language-none">Model(blocks:AbstractComponent[Network{Nothing,Bus{Link{Float64}},Link{Float64},Link{Bool},Array{AbstractSystem,1},Array{Int64,2},Array{Int64,2}}(nothing, Bus(nlinks:6, eltype:Link{Float64}, isreadable:false, iswritable:false), Link(state:open, eltype:Float64, hasmaster:false, numslaves:0, isreadable:false, iswritable:false), Link(state:open, eltype:Bool, hasmaster:false, numslaves:0, isreadable:false, iswritable:false), Callback[], UUID(&quot;5b4ac5dd-9ba0-49e8-8166-876ecb9e832c&quot;), AbstractSystem[LorenzSystem(sigma:10.0, beta:2.6666666666666665, rho:28.0, gamma:1.0, state:[0.07447929810661713, 0.3171065951989447, 0.4981002551774796], t:0.0, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), LorenzSystem(sigma:10.0, beta:2.6666666666666665, rho:28.0, gamma:1.0, state:[0.7479647558329519, 0.4307042696943002, 0.4033980734200635], t:0.0, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), Coupler(conmat:[-10 10; 10 -10], cplmat:[1 0 0; 0 0 0; 0 0 0]), Memory(ndelay:3, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false)), Memory(ndelay:3, input:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false), output:Bus(nlinks:3, eltype:Link{Float64}, isreadable:false, iswritable:false))], [-10 10; 10 -10], [1 0 0; 0 0 0; 0 0 0], UnitRange{Int64}[1:2]), Writer(path:/tmp/3033372c-5628-40f3-9abc-171a48927691.jld2, nin:6)])</code></pre><p>At this point, we are ready to simulate the system. </p><pre><code class="language-julia">t0 = 0
dt = 0.01
tf = 100.
sim = simulate(model, t0, dt, tf)</code></pre><pre><code class="language-none">Simulation(state:done, retcode:success, path:/tmp/Simulation-a033c9ec-96e6-4a86-90cf-c7f725c475d4)</code></pre><p>Then, we read the data from the writers and plot the data. </p><pre><code class="language-julia">using Plots
t, x = read(writer, flatten=true)
p1 = plot(t, x[:, 1])
    plot!(t, x[:, 4])
p2 = plot(t, abs.(x[:, 1] - x[:, 4]))
p3 = plot(p1, p2, layout=(2,1))</code></pre><pre><code class="language-none">qt5ct: using qt5ct plugin</code></pre><p><img src="../network_simulation_plot.svg" alt/></p><p>Note the systems are synchronized, i.e., the error between the outputs of the nodes goes to zero as time goes to zero. This synchronization phenomenon depends on the coupling strength between the nodes. The synchronization is not achieved when he coupling strength between the nodes are is large enough.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../construction_and_simulation_of_subsystems/">« Constuction and Simulation of Subsystems</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Saturday 22 February 2020 23:47">Saturday 22 February 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
